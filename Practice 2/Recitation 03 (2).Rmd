---
title: "Recitation 3 DA5030 Fall 2020"
author: "Martin Schedlbauer"
output:
  pdf_document: default
  html_notebook: default
---

## Random Numbers, Sampling

The series of values generated by such algorithms is generally determined by a fixed number called a _seed_.

```{r eval=TRUE, echo=FALSE}
set.seed(42095)

#runif(5, min=5, max=99)
#rnorm(5)

# generate 5 integers from 0 to 100
#floor(runif(5, min=0, max=101))

head(mtcars)
str(mtcars)

# generating integers without replacement
r <- sample(1:32, floor(32*0.8), replace=FALSE)
r
mtcars[r,]
mtcars[-r,]

# sampling with replacement as training and testing data may have overlapping observations
r <- sample(1:32, floor(32*0.2), replace=FALSE)
r
mtcars[r,]
```

## Random Number Generating Functions

One of the most common PRNG is the linear congruential generator, which uses the recurrence

$X_{n+1} = (aX_n + b)\mod m$

to generate numbers, where a, b and m are large integers, and $X_{n+1}$ is the next in $X$ as a series of _pseudo-random_ numbers.

```{r}

```


## Loops, Iteration

### _for_ loops

```{r}
# Create a vector filled with random normal values
u1 <- rnorm(30)
print("This loop calculates the square of the first 10 elements of vector u1")

# Initialize `usq`
usq <- 0

for(i in 1:10) {
  # i-th element of `u1` squared into `i`-th position of `usq`
  usq[i] <- u1[i]*u1[i]
  print(usq[i])
}

print(i)
```
## Games with Loops

Usual loops: for, while, "do" repeat

```{r}
set.seed(4432)
v1 <- c(3,7,1,9,5,3,7,2)
v2 <- floor(runif(8,min=1,max=100))

v1[3]
v2
v3 <- 1:8

n <- min(length(v1),length(v2))

for (i in 1:n)
{
  v3[i] <- v1[i] / v2[i]
}

v3

v3<- v1 / v2
v3
```

## Time Series Analysis

```{r}
lh <- LakeHuron
head(lh)
str(lh)
plot(x=1875:1972,y=lh,type="l")
```
```{r}
n <- length(lh)

# three-year simple moving average
t <- (lh[n] + lh[n-1] + lh[n-2])/3

lh[n]
t1972_98 <- (lh[97]+lh[96]+lh[95])/3
t1972_98

e <- t1972_98 - lh[n]
e

p <- 1:n
e <- 1:n
mad <- 1:n

x <- 10

for (k in 1:x)
{
  for (i in (k+1):n)
  {
    # p[i] <- (lh[i-1]+lh[i-2]+lh[i-3]) / k
    p[i] <- mean(lh[(i-1):(i-k)])
    e[i] <- abs(p[i] - lh[i])
  }
  mad[k] <- mean(e)
}

min_mad <- min(mad)
best_k <- which(mad == min_mad)

best_k

```

```{r}
v <- c(7,4,2,5,6,1,7,4,2,9)

a <- 1
b <- 3
mean(v[a:b])
```


Load data: CSV (Comma Separated Values)

```{r}
usedcars <- read.csv("usedcars.csv", header = TRUE, stringsAsFactors = TRUE)
head(usedcars, 4)
str(usedcars)
```